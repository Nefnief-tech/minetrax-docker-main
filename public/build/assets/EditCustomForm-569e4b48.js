import{T as L,s as N,r as A,x as P,y as B,l as w,o as c,c as b,w as u,b as a,a as e,t as r,i as D,u as t,j as M,v as X,e as q,f as p,d as h,g as I,F as H,z as K,B as z}from"./app-0e0bee07.js";import{_ as g}from"./InputError-e9fa0bd5.js";import{L as V}from"./LoadingButton-51189603.js";import{X as _}from"./XInput-093ef8f4.js";import{X as y}from"./XSelect-bfeaeee6.js";import{X as F}from"./XCheckbox-d22dd92f.js";import{E as G}from"./easymde-528b8230.js";import{_ as R}from"./AdminLayout-740a5fa8.js";import{I as W}from"./AppLayout-3157e4a2.js";import{_ as J}from"./DialogModal-50878fa2.js";import{_ as Q}from"./SecondaryButton-4aca357c.js";import{u as Y}from"./useFormKit-76989f8a.js";import"./useAuthorizable-8eccef14.js";import"./CloudArrowDownIcon-d1d7f067.js";import"./index-d161bd52.js";import"./Modal-945c7546.js";const Z={class:"py-12 px-10 max-w-7xl mx-auto"},ee={class:"flex justify-between mb-8"},se={class:"font-bold text-3xl text-gray-500 dark:text-gray-300"},oe={class:"mt-10 sm:mt-0"},te={class:"md:grid md:grid-cols-6 md:gap-6"},le={class:"mt-5 md:mt-0 md:col-span-6"},ie=["onSubmit"],ae={class:"shadow overflow-hidden sm:rounded-md"},re={class:"px-4 py-5 bg-white dark:bg-cool-gray-800 sm:p-6"},ne={class:"grid grid-cols-6 gap-4"},me={class:"col-span-6 sm:col-span-6"},de={class:"col-span-6 sm:col-span-6"},ue={class:"col-span-6 sm:col-span-6"},_e={class:"col-span-6 sm:col-span-6"},ce={class:"col-span-6 sm:col-span-3"},pe={class:"col-span-6 sm:col-span-3"},fe={class:"col-span-6 sm:col-span-3"},be={class:"flex items-center col-span-6 sm:col-span-3"},he={class:"mt-4 flex space-x-4"},ge={class:"flex items-center col-span-6 sm:col-span-3"},ye={class:"mt-4 flex space-x-4"},xe={class:"flex-col col-span-6 space-y-1 sm:col-span-6"},ve={class:"text-base font-medium text-gray-900 dark:text-gray-300"},we={class:"w-full space-y-1"},Ve={class:"flex space-x-4"},Fe=e("div",{class:"w-5"},null,-1),ke={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Ce=e("span",{class:"text-red-500"},"*",-1),Ue={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Se=e("span",{class:"text-red-500"},"*",-1),Oe={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},$e={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Ee={class:"flex-1 block text-sm font-medium text-gray-700 dark:text-gray-400"},Te=e("span",{class:"text-red-500"},"* ",-1),je=e("span",{class:"text-xs text-gray-500"},"(Eg: Options1,Option2)",-1),Le=["onClick"],Ne={class:"flex-1"},Ae={class:"flex-1"},Pe={class:"flex-1"},Be={class:"flex-1"},De={class:"flex-1"},Me={key:1,class:"h-full text-gray-700 text-lg font-semibold dark:text-gray-300 w-full flex items-center justify-center"},Xe={class:"flex justify-end mt-1"},qe={class:"px-4 py-3 bg-gray-50 dark:bg-cool-gray-800 sm:px-6 flex justify-between gap-2"},Ie={class:"text-lg font-bold"},as={__name:"EditCustomForm",props:{customForm:Object},setup(k){const m=k,C={draft:"Draft - Form is under development and not visible to users",active:"Active - Form is actively accepting submissions",disabled:"Disabled - Form is disabled for new submissions",archived:"Archived - Form is archived and not visible to users"},U={anyone:"Anyone - Anyone including Guest can submit this form",auth:"Auth Only - Only registered users can submit this form",staff:"Staff Only - Only staff members (is_staff) can submit this form"},x={text:{},textarea:{},select:{hasOptions:!0},multiselect:{hasOptions:!0},radio:{hasOptions:!0},checkbox:{},email:{},number:{},password:{},tel:{},url:{},week:{},month:{},time:{},date:{},"datetime-local":{}},s=L({title:m.customForm.title,slug:m.customForm.slug,status:m.customForm.status.value,description:m.customForm.description,can_create_submission:m.customForm.can_create_submission,max_submission_per_user:m.customForm.max_submission_per_user,min_role_weight_to_view_submission:m.customForm.min_role_weight_to_view_submission,is_notify_staff_on_submission:m.customForm.is_notify_staff_on_submission,is_visible_in_listing:m.customForm.is_visible_in_listing,fields:m.customForm.fields,_method:"PUT"});let v=null;const S=()=>{s.description=v.value(),s.fields.map(o=>{o.name=o.label.toLowerCase().replace(/ /g,"_")}),s.can_create_submission==="anyone"&&(s.max_submission_per_user=null),s.post(route("admin.custom-form.update",m.customForm.id),{})};N(()=>{v=new G({previewClass:"editor-preview prose max-w-none"})});function O(){s.fields.push({type:"text",label:"",name:"",validation:"required"})}function $(o){s.fields.length!==1&&s.fields.splice(o,1)}const f=A(!1),E=P(()=>Y().generateSchemaFromFieldsArray(s.fields));return B(()=>s.title,o=>{s.slug=z.kebabCase(o)}),(o,i)=>{const T=w("app-head"),j=w("inertia-link");return c(),b(R,null,{default:u(()=>[a(T,{title:"Edit Custom Form"}),e("div",Z,[e("div",ee,[e("h1",se,r(o.__("Edit Custom Form")),1),a(j,{href:o.route("admin.custom-form.index"),class:"inline-flex items-center px-4 py-2 bg-gray-400 dark:bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-500 active:bg-gray-600 focus:outline-none focus:border-gray-500 focus:shadow-outline-gray transition ease-in-out duration-150"},{default:u(()=>[e("span",null,r(o.__("Cancel")),1)]),_:1},8,["href"])]),e("div",oe,[e("div",te,[e("div",le,[e("form",{onSubmit:D(S,["prevent"])},[e("div",ae,[e("div",re,[e("div",ne,[e("div",me,[a(_,{id:"title",modelValue:t(s).title,"onUpdate:modelValue":i[0]||(i[0]=l=>t(s).title=l),label:o.__("Title of Custom Form"),help:o.__("Eg: Contact Us"),error:t(s).errors.title,type:"text",name:"title","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",de,[a(_,{id:"slug",modelValue:t(s).slug,"onUpdate:modelValue":i[1]||(i[1]=l=>t(s).slug=l),label:o.__("Form Slug"),help:o.__("Only alphabet, number and dashes. Eg: contact-us"),error:t(s).errors.slug,type:"text",name:"slug","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",ue,[a(y,{id:"status",modelValue:t(s).status,"onUpdate:modelValue":i[2]||(i[2]=l=>t(s).status=l),name:"status",label:o.__("Form Status"),placeholder:o.__("Select a status of form.."),"disable-null":!0,"select-list":C},null,8,["modelValue","label","placeholder"])]),e("div",_e,[M(e("textarea",{id:"description","onUpdate:modelValue":i[3]||(i[3]=l=>t(s).description=l),"aria-label":"description",name:"description",class:"mt-1 focus:ring-light-blue-500 focus:border-light-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[X,t(s).description]]),a(g,{message:t(s).errors.description,class:"mt-2 text-right"},null,8,["message"])]),e("div",ce,[a(y,{id:"can_create_submission",modelValue:t(s).can_create_submission,"onUpdate:modelValue":i[4]||(i[4]=l=>t(s).can_create_submission=l),name:"can_create_submission",label:o.__("Permission to Create Submission"),placeholder:o.__("Select a who can create submittion for this form.."),"disable-null":!0,"select-list":U},null,8,["modelValue","label","placeholder","select-list"])]),e("div",pe,[t(s).can_create_submission!=="anyone"?(c(),b(_,{key:0,id:"max_submission_per_user",modelValue:t(s).max_submission_per_user,"onUpdate:modelValue":i[5]||(i[5]=l=>t(s).max_submission_per_user=l),label:o.__("Max Submission Per User"),help:o.__("Leave empty to allow unlimited submission per user."),error:t(s).errors.max_submission_per_user,type:"number",name:"max_submission_per_user","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])):q("",!0)]),e("div",fe,[a(_,{id:"min_role_weight_to_view_submission",modelValue:t(s).min_role_weight_to_view_submission,"onUpdate:modelValue":i[6]||(i[6]=l=>t(s).min_role_weight_to_view_submission=l),label:o.__("Role Weight to View Submission"),help:o.__("Leave empty to allow any staff with view custom_form_submissions permission to view submissions."),error:t(s).errors.min_role_weight_to_view_submission,type:"number",name:"min_role_weight_to_view_submission","help-error-flex":"flex-row"},null,8,["modelValue","label","help","error"])]),e("div",be,[e("fieldset",null,[e("div",he,[a(F,{id:"is_notify_staff_on_submission",modelValue:t(s).is_notify_staff_on_submission,"onUpdate:modelValue":i[7]||(i[7]=l=>t(s).is_notify_staff_on_submission=l),label:o.__("Notify Staff on Submission"),help:o.__("Notify staff members (with view submission permission) when new submission is made for this form."),name:"is_notify_staff_on_submission"},null,8,["modelValue","label","help"])]),a(g,{message:t(s).errors.is_notify_staff_on_submission,class:"mt-2"},null,8,["message"])])]),e("div",ge,[e("fieldset",null,[e("div",ye,[a(F,{id:"is_visible_in_listing",modelValue:t(s).is_visible_in_listing,"onUpdate:modelValue":i[8]||(i[8]=l=>t(s).is_visible_in_listing=l),label:o.__("Is Visible in Listing"),help:o.__("Allow this form to be listed in custom form listing page."),name:"is_visible_in_listing"},null,8,["modelValue","label","help"])]),a(g,{message:t(s).errors.is_visible_in_listing,class:"mt-2"},null,8,["message"])])]),e("div",xe,[e("legend",ve,r(o.__("Fields")),1),e("div",we,[e("div",Ve,[Fe,e("label",ke,[p(r(o.__("Name"))+" ",1),Ce]),e("label",Ue,[p(r(o.__("Type"))+" ",1),Se]),e("label",Oe,r(o.__("Validation")),1),e("label",$e,r(o.__("Help Text")),1),e("label",Ee,[p(r(o.__("Options"))+" ",1),Te,je])]),(c(!0),h(H,null,I(t(s).fields,(l,n)=>(c(),h("div",{key:n,class:"flex space-x-4"},[e("button",{type:"button",class:"focus:outline-none group",onClick:d=>$(n)},[a(W,{class:"w-5 h-5 text-gray-300 group-hover:text-red-500",name:"trash"})],8,Le),e("div",Ne,[a(_,{modelValue:l.label,"onUpdate:modelValue":d=>l.label=d,label:o.__("Name Field :index",{index:n+1}),error:t(s).errors[`fields.${n}.label`]||t(s).errors[`fields.${n}.name`],type:"text","help-error-flex":"flex-col",required:!0},null,8,["modelValue","onUpdate:modelValue","label","error"])]),e("div",Ae,[a(y,{modelValue:l.type,"onUpdate:modelValue":d=>l.type=d,label:o.__("Page Type"),error:t(s).errors[`fields.${n}.type`],"help-error-flex":"flex-col","select-list":Object.keys(x),required:!0},null,8,["modelValue","onUpdate:modelValue","label","error","select-list"])]),e("div",Pe,[a(_,{modelValue:l.validation,"onUpdate:modelValue":d=>l.validation=d,label:o.__("Validation Field :index",{index:n+1}),error:t(s).errors[`fields.${n}.validation`],type:"text","help-error-flex":"flex-col"},null,8,["modelValue","onUpdate:modelValue","label","error"])]),e("div",Be,[a(_,{modelValue:l.help,"onUpdate:modelValue":d=>l.help=d,label:o.__("Help Text Field :index",{index:n+1}),error:t(s).errors[`fields.${n}.help`],type:"text","help-error-flex":"flex-col"},null,8,["modelValue","onUpdate:modelValue","label","error"])]),e("div",De,[x[l.type].hasOptions?(c(),b(_,{key:0,modelValue:l.options,"onUpdate:modelValue":d=>l.options=d,label:o.__("Options Field :index",{index:n+1}),error:t(s).errors[`fields.${n}.options`],type:"text","help-error-flex":"flex-col",required:!0},null,8,["modelValue","onUpdate:modelValue","label","error"])):(c(),h("div",Me," - "))])]))),128)),e("div",Xe,[e("button",{type:"button",class:"p-1.5 text-xs text-light-blue-500 rounded border border-light-blue-500 focus:outline-none hover:text-light-blue-300 hover:border-light-blue-300 transition ease-in-out duration-150",onClick:O},r(o.__("Add New Field")),1)])])])])]),e("div",qe,[a(V,{class:"inline-flex justify-center py-2 px-4 border border-gray-200 shadow-sm text-sm font-medium rounded-md text-gray-600 bg-gray-50 hover:bg-white disabled:opacity-50 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:border-gray-600",type:"button",onClick:i[9]||(i[9]=l=>f.value=!0)},{default:u(()=>[p(r(o.__("Preview Form")),1)]),_:1}),a(V,{loading:t(s).processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-light-blue-500 hover:bg-light-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-light-blue-500 disabled:opacity-50",type:"submit"},{default:u(()=>[p(r(o.__("Update Custom Form")),1)]),_:1},8,["loading"])])])],40,ie)])])]),a(J,{show:f.value,onClose:i[11]||(i[11]=l=>f.value=!1)},{title:u(()=>[e("h3",Ie,r(o.__("Form Preview")),1)]),content:u(()=>[a(t(K),{schema:E.value},null,8,["schema"])]),footer:u(()=>[a(Q,{onClick:i[10]||(i[10]=l=>f.value=!1)},{default:u(()=>[p(r(o.__("Close")),1)]),_:1})]),_:1},8,["show"])])]),_:1})}}};export{as as default};
